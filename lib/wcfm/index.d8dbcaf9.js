import{_ as g,o as s,c as r,a as Z,b as l,n as L,d as m,e as T,t as y,p as P,f as H,r as p,g as _,F as O,h as j,i as w,j as B,k as E,m as G,V as K,w as V,l as N,q as x,v as I,s as X,u as Q,x as J,y as ee,z as W,T as se,A as te,B as ae,C as le}from"./vendor.ba0f948c.js";const re=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function o(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(i){if(i.ep)return;i.ep=!0;const n=o(i);fetch(i.href,n)}};re();class S{static post(e,o,c){var i=this;window.wcfmoptions.poster(e,o,function(n){c.call(i,n)},function(){console.log("failure")})}}const ce={},de={style:{position:"absolute",width:"0",height:"0"},width:"0",height:"0",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},ue=Z(`<defs><symbol id="icon-folder" viewBox="0 0 309.267 309.267"><g><path style="fill:#D0994B;" d="M260.944,43.491H125.64c0,0-18.324-28.994-28.994-28.994H48.323c-10.67,0-19.329,8.65-19.329,19.329
        		v222.286c0,10.67,8.659,19.329,19.329,19.329h212.621c10.67,0,19.329-8.659,19.329-19.329V62.82
        		C280.273,52.15,271.614,43.491,260.944,43.491z"></path><path style="fill:#E4E7E7;" d="M28.994,72.484h251.279v77.317H28.994V72.484z"></path><path style="fill:#F4B459;" d="M19.329,91.814h270.609c10.67,0,19.329,8.65,19.329,19.329l-19.329,164.298
        		c0,10.67-8.659,19.329-19.329,19.329H38.658c-10.67,0-19.329-8.659-19.329-19.329L0,111.143C0,100.463,8.659,91.814,19.329,91.814z
        		"></path></g></symbol><symbol id="icon-unfold" viewBox="0 0 32 32"><path d="M28,14H18V4c0-1.104-0.896-2-2-2s-2,0.896-2,2v10H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h10v10c0,1.104,0.896,2,2,2  s2-0.896,2-2V18h10c1.104,0,2-0.896,2-2S29.104,14,28,14z"></path></symbol><symbol id="icon-fold" viewBox="0 0 24 24"><g fill="none" stroke="#000" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></g></symbol><symbol id="icon-file" viewBox="0 0 56 56"><g><path style="fill:#E9E9E0;" d="M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074
        		c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"></path><polygon style="fill:#D9D7CA;" points="37.5,0.151 37.5,12 49.349,12 	"></polygon><circle style="fill:#F3D55B;" cx="18.931" cy="14.431" r="4.569"></circle><polygon style="fill:#c5e8e1;" points="6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 	"></polygon><path style="fill:#14A085;" d="M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"></path><g></g></g></symbol><svg id="icon-ok" viewBox="0 0 256 256"><g fill="green" stroke="none" transform="translate(0.000000,256.000000) scale(0.100000,-0.100000)"><path d="M1064 2545 c-406 -72 -744 -324 -927 -690 -96 -193 -127 -333 -127 -575 0 -243 33 -387 133 -585 177 -351 518 -606 907 -676 118 -22 393 -17 511 8 110 24 252 78 356 136 327 183 569 525 628 887 19 122 19 338 0 460 -81 498 -483 914 -990 1025 -101 22 -389 28 -491 10z m814 -745 c39 -27 73 -59 77 -70 9 -27 10 -25 -372 -590 -345 -510 -357 -524 -420 -512 -19 4 -98 74 -250 225 -123 121 -225 228 -228 238 -3 10 1 31 9 47 20 40 125 132 149 132 11 0 79 -59 162 -140 79 -77 146 -140 149 -140 3 0 38 48 78 108 95 143 465 678 496 720 35 46 64 42 150 -18z"></path></g></svg><svg id="icon-not-available" viewBox="0 0 500.000000 500.000000" preserveAspectRatio="xMidYMid meet"><g fill="#b11010" stroke="none" transform="translate(0.000000,500.000000) scale(0.100000,-0.100000)"><path d="M2315 4800 c-479 -35 -928 -217 -1303 -527 -352 -293 -615 -702 -738 -1151 -104 -380 -104 -824 0 -1204 107 -389 302 -724 591 -1013 354 -354 785 -572 1279 -646 196 -30 476 -30 672 0 494 74 925 292 1279 646 354 354 571 784 646 1279 30 197 30 475 0 672 -75 495 -292 925 -646 1279 -289 289 -624 484 -1013 591 -228 62 -528 91 -767 74z m353 -511 c458 -50 874 -272 1170 -624 417 -497 536 -1174 308 -1763 -56 -145 -176 -367 -235 -434 -4 -4 -566 552 -1250 1236 l-1243 1243 94 60 c354 229 754 327 1156 282z m864 -3200 c-67 -59 -289 -179 -434 -235 -946 -366 -2024 172 -2322 1158 -47 155 -66 276 -73 453 -13 362 84 704 290 1023 l60 94 1243 -1243 c684 -684 1240 -1246 1236 -1250z"></path></g></svg><svg id="icon-help" viewBox="0 0 400 400" style="enable-background:new 0 0 400 400;" xml:space="preserve"><g><path style="fill:#cccccc;" d="M199.996,0C89.719,0,0,89.72,0,200c0,110.279,89.719,200,199.996,200C310.281,400,400,310.279,400,200
      			C400,89.72,310.281,0,199.996,0z M199.996,373.77C104.187,373.77,26.23,295.816,26.23,200
      			c0-95.817,77.957-173.769,173.766-173.769c95.816,0,173.772,77.953,173.772,173.769
      			C373.769,295.816,295.812,373.77,199.996,373.77z"></path><path style="fill:#000000;" d="M199.996,91.382c-35.176,0-63.789,28.616-63.789,63.793c0,7.243,5.871,13.115,13.113,13.115
      			c7.246,0,13.117-5.873,13.117-13.115c0-20.71,16.848-37.562,37.559-37.562c20.719,0,37.566,16.852,37.566,37.562
      			c0,20.714-16.849,37.566-37.566,37.566c-7.242,0-13.113,5.873-13.113,13.114v45.684c0,7.243,5.871,13.115,13.113,13.115
      			s13.117-5.872,13.117-13.115v-33.938c28.905-6.064,50.68-31.746,50.68-62.427C263.793,119.998,235.176,91.382,199.996,91.382z"></path><path d="M200.004,273.738c-9.086,0-16.465,7.371-16.465,16.462s7.379,16.465,16.465,16.465c9.094,0,16.457-7.374,16.457-16.465
      			S209.098,273.738,200.004,273.738z"></path></g></svg><svg id="icon-help2" viewBox="0 0 431.855 431.855" style="enable-background:new 0 0 431.855 431.855;" xml:space="preserve"><g><path style="fill:#aaaaaa;" d="M215.936,0C96.722,0,0.008,96.592,0.008,215.814c0,119.336,96.714,216.041,215.927,216.041
        		c119.279,0,215.911-96.706,215.911-216.041C431.847,96.592,335.214,0,215.936,0z M231.323,335.962
        		c-5.015,4.463-10.827,6.706-17.411,6.706c-6.812,0-12.754-2.203-17.826-6.617c-5.08-4.406-7.625-10.575-7.625-18.501
        		c0-7.031,2.463-12.949,7.373-17.745c4.91-4.796,10.933-7.194,18.078-7.194c7.031,0,12.949,2.398,17.753,7.194
        		c4.796,4.796,7.202,10.713,7.202,17.745C238.858,325.362,236.346,331.5,231.323,335.962z M293.856,180.934
        		c-3.853,7.145-8.429,13.306-13.737,18.501c-5.292,5.194-14.81,13.924-28.548,26.198c-3.788,3.463-6.836,6.503-9.12,9.12
        		c-2.284,2.626-3.991,5.023-5.105,7.202c-1.122,2.178-1.983,4.357-2.593,6.535c-0.61,2.17-1.528,5.999-2.772,11.469
        		c-2.113,11.608-8.754,17.411-19.915,17.411c-5.804,0-10.681-1.894-14.656-5.69c-3.959-3.796-5.934-9.429-5.934-16.907
        		c0-9.372,1.455-17.493,4.357-24.361c2.886-6.869,6.747-12.892,11.543-18.086c4.804-5.194,11.274-11.356,19.427-18.501
        		c7.145-6.251,12.307-10.965,15.485-14.144c3.186-3.186,5.861-6.73,8.031-10.632c2.187-3.91,3.26-8.145,3.26-12.721
        		c0-8.933-3.308-16.46-9.957-22.597c-6.641-6.137-15.209-9.21-25.703-9.21c-12.282,0-21.321,3.097-27.125,9.291
        		c-5.804,6.194-10.705,15.314-14.729,27.369c-3.804,12.616-11.006,18.923-21.598,18.923c-6.251,0-11.526-2.203-15.826-6.609
        		c-4.292-4.406-6.438-9.177-6.438-14.314c0-10.6,3.406-21.346,10.21-32.23c6.812-10.884,16.745-19.899,29.807-27.036
        		c13.054-7.145,28.296-10.722,45.699-10.722c16.184,0,30.466,2.991,42.854,8.966c12.388,5.966,21.963,14.087,28.718,24.361
        		c6.747,10.266,10.128,21.427,10.128,33.482C299.635,165.473,297.709,173.789,293.856,180.934z"></path></g></svg><svg id="icon-loading" viewBox="0 0 128 128" xml:space="preserve"><g><path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="#049046"></path><path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="#c5e8e1" transform="rotate(45 64 64)"></path><path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="#c5e8e1" transform="rotate(90 64 64)"></path><path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="#c5e8e1" transform="rotate(135 64 64)"></path><path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="#c5e8e1" transform="rotate(180 64 64)"></path><path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="#c5e8e1" transform="rotate(225 64 64)"></path><path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="#c5e8e1" transform="rotate(270 64 64)"></path><path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="#c5e8e1" transform="rotate(315 64 64)"></path><animateTransform attributeName="transform" type="rotate" values="0 64 64;45 64 64;90 64 64;135 64 64;180 64 64;225 64 64;270 64 64;315 64 64" calcMode="discrete" dur="720ms" repeatCount="indefinite"></animateTransform></g></svg><svg id="icon-trash" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><path d="M423.059,45.755h-97.156C321.093,19.757,298.267,0,270.897,0h-29.794c-27.37,0-50.196,19.757-55.006,45.755H88.941
         			c-5.633,0-10.199,4.567-10.199,10.199v62.781c0,5.632,4.566,10.199,10.199,10.199h13.21v372.867
         			c0,5.632,4.566,10.199,10.199,10.199H399.65c5.633,0,10.199-4.567,10.199-10.199V128.934h13.21
         			c5.633,0,10.199-4.567,10.199-10.199V55.954C433.258,50.322,428.692,45.755,423.059,45.755z M241.103,20.398h29.794
         			c16.063,0,29.672,10.706,34.065,25.356h-97.926C211.432,31.104,225.04,20.398,241.103,20.398z M389.45,491.602H122.55V128.934
         			H389.45V491.602z M412.861,108.536H99.14V66.153h313.72V108.536z"></path></g></g><g><g><path d="M256,151.099c-17.359,0-31.481,14.122-31.481,31.48v255.378c0,17.358,14.122,31.481,31.481,31.481
         			s31.481-14.123,31.481-31.481V182.579C287.481,165.22,273.359,151.099,256,151.099z M267.082,437.957
         			c0,6.11-4.972,11.082-11.082,11.082c-6.11,0-11.082-4.972-11.082-11.082V182.579c0-6.11,4.972-11.081,11.082-11.081
         			c6.11,0,11.082,4.971,11.082,11.081V437.957z"></path></g></g><g><g><path d="M171.938,151.099c-17.359,0-31.481,14.122-31.481,31.48v255.378c0,17.358,14.123,31.481,31.481,31.481
         			c17.359,0,31.481-14.123,31.481-31.481V182.579C203.419,165.22,189.297,151.099,171.938,151.099z M183.021,437.957
         			c0,6.11-4.972,11.082-11.082,11.082s-11.082-4.972-11.082-11.082V182.579c0-6.11,4.972-11.081,11.082-11.081
         			s11.082,4.971,11.082,11.081V437.957z"></path></g></g><g><g><path d="M340.062,151.099c-17.359,0-31.481,14.122-31.481,31.48v255.378c0,17.358,14.122,31.481,31.481,31.481
         			c17.359,0,31.481-14.123,31.481-31.481V182.579C371.543,165.22,357.421,151.099,340.062,151.099z M351.144,437.957
         			c0,6.11-4.972,11.082-11.082,11.082s-11.082-4.972-11.082-11.082V182.579c0-6.11,4.972-11.081,11.082-11.081
         			s11.082,4.971,11.082,11.081V437.957z"></path></g></g><g><g><path d="M218.758,79.806H118.735c-5.633,0-10.199,4.567-10.199,10.199c0,5.632,4.566,10.199,10.199,10.199h100.023
         			c5.633,0,10.199-4.567,10.199-10.199C228.957,84.373,224.391,79.806,218.758,79.806z"></path></g></g><g><g><path d="M259.192,79.806h-5.32c-5.633,0-10.199,4.567-10.199,10.199c0,5.632,4.566,10.199,10.199,10.199h5.32
         			c5.633,0,10.199-4.567,10.199-10.199C269.392,84.373,264.825,79.806,259.192,79.806z"></path></g></g></svg></defs>`,1),he=[ue];function me(t,e){return s(),r("svg",de,he)}var pe=g(ce,[["render",me]]);const fe={name:"FileItem",emits:["toggle","select"],props:{item:Object},data(){return{hover:!1,selected:!1}},inject:["wcfm"],methods:{onClick(t){this.selected=!0,this.$emit("select",this)},getWCFM(){return this.wcfm},getFullPath(){for(var t=this.$parent,e=[];t!==null&&t.$parent!==null;)t.item&&e.push(t.item.name),t=t.$parent;return e.pop(),e=e.reverse().join("/"),e=e.replace("//","/"),e},infoClick(){this.getWCFM().displayInfo(this.getFullPath())},convertClick(){this.getWCFM().onConvertClick(this.getFullPath())}}},F=t=>(P("data-v-4fb0cc48"),t=t(),H(),t),ge={key:0,class:"icon-fold"},ve=F(()=>l("use",{"xlink:href":"#icon-fold"},null,-1)),ye=[ve],_e={key:1,class:"icon-unfold"},be=F(()=>l("use",{"xlink:href":"#icon-unfold"},null,-1)),we=[be],ke=F(()=>l("use",{"xlink:href":"#icon-folder"},null,-1)),xe=[ke],Ve={key:2,class:"icon-file"},Ce=F(()=>l("use",{"xlink:href":"#icon-file"},null,-1)),ze=[Ce];function Se(t,e,o,c,i,n){return s(),r("div",{class:L({fileitem:!0,selected:i.selected}),onMouseover:e[2]||(e[2]=a=>i.hover=!0),onMouseleave:e[3]||(e[3]=a=>i.hover=!1),onClick:e[4]||(e[4]=(...a)=>n.onClick&&n.onClick(...a))},[l("p",null,[o.item.isDir?(s(),r("span",{key:0,class:L({"fold-unfold":!0,empty:o.item.isEmpty}),onClick:e[0]||(e[0]=a=>this.$emit("toggle"))},[o.item.isOpen?(s(),r("svg",ge,ye)):m("",!0),o.item.isOpen?m("",!0):(s(),r("svg",_e,we))],2)):m("",!0),o.item.isDir?(s(),r("svg",{key:1,class:"icon-folder",onClick:e[1]||(e[1]=a=>this.$emit("toggle"))},xe)):m("",!0),o.item.isDir?m("",!0):(s(),r("svg",Ve,ze)),T(" "+y(o.item.nickname||o.item.name),1)])],34)}var Me=g(fe,[["render",Se],["__scopeId","data-v-4fb0cc48"]]);const Ie={name:"FileTree",components:{FileItem:Me},emits:["select"],props:{item:Object},data(){return{loading:!1}},methods:{load(){var t=this;S.post("get-folder",{path:this.$refs.thefileitem.getFullPath()},function(e){t.loading=!0,t.item.children=e.children.sort(function(o,c){return o.isDir&&!c.isDir?-1:!o.isDir&&c.isDir||o.name>c.name?1:o.name<c.name?-1:0}),t.item.loaded=!0,t.loading=!1})},toggle(){this.item.isOpen=!this.item.isOpen,this.item.loaded||this.load()},onSelect(t){this.$emit("select",t)}},mounted(){let t=this.$refs.thefileitem.getFullPath();(t=="/"||t.indexOf("/")==-1)&&this.toggle()}},$e={key:0},Te=l("li",null,"loading...",-1),Oe=[Te],Be={key:1,class:"tree"};function De(t,e,o,c,i,n){const a=p("FileItem"),u=p("FileTree",!0);return s(),r(O,null,[_(a,{ref:"thefileitem",item:o.item,onDblclick:n.toggle,onToggle:n.toggle,onSelect:n.onSelect},null,8,["item","onDblclick","onToggle","onSelect"]),i.loading?(s(),r("ul",$e,Oe)):m("",!0),o.item.children!==void 0&&o.item.isOpen?(s(),r("ul",Be,[(s(!0),r(O,null,j(o.item.children,f=>(s(),r("li",null,[_(u,{item:f,onSelect:n.onSelect},null,8,["item","onSelect"])]))),256))])):m("",!0)],64)}var Le=g(Ie,[["render",De]]);const Ae={name:"Files",components:{FileTree:Le},emits:["select"],props:{item:Object,statusText:String},methods:{onSelect(t){this.selectedItem&&(this.selectedItem.selected=!1),this.selectedItem=t,this.$emit("select",this.selectedItem.getFullPath(),this.selectedItem.item.isDir)}},data(){return{selected:null}}},je={key:1};function Fe(t,e,o,c,i,n){const a=p("FileTree");return s(),r(O,null,[o.item?(s(),w(a,{key:0,item:o.item,onSelect:n.onSelect},null,8,["item","onSelect"])):m("",!0),o.item?m("",!0):(s(),r("div",je,y(o.statusText),1))],64)}var Re=g(Ae,[["render",Fe]]);const Ue={name:"Modal",emits:["close"],props:{title:{type:String},closeButtonText:{type:String},width:{type:[Number,String],default:"95%"},maxwidth:{type:[Number,String],default:"700px"},alignment:{type:String,default:"center"},height:{type:[Number,String],default:"92%"},maxheight:{type:[Number,String],default:"700px"},valignment:{type:String,default:"center"}},computed:{containerStyle(){let t={width:this.width,"max-width":this.maxwidth,height:this.height,"max-height":this.maxheight};return this.alignment=="center"&&(t.margin="0px auto"),this.alignment=="right"&&(t.position="absolute",t.right="10px"),this.valignment=="center"&&(t.top="50%",t.transform="translateY(-50%)"),this.alignment=="bottom"&&(t.position="absolute",t.bottom="10px"),t}},methods:{onCloseClick(){this.$emit("close")},registerKeyDownEvent(){let t=this;document.onkeydown=function(e){e=e||window.event;var o=!1;"key"in e?o=e.key==="Escape"||e.key==="Esc":o=e.keyCode===27,o&&t.$emit("close")}}},mounted(){this.registerKeyDownEvent()}},Ye={class:"modal-mask"},Pe={class:"modal-wrapper"},He={class:"title"},Ne={class:"modal-body"},Xe={class:"content"},We=T(" default body "),qe={class:"close-button-with-text"};function Ze(t,e,o,c,i,n){return s(),r("div",Ye,[l("div",Pe,[l("div",{class:"modal-container",style:B(n.containerStyle)},[l("a",{class:"close-button",onClick:e[0]||(e[0]=(...a)=>n.onCloseClick&&n.onCloseClick(...a))},"X"),l("div",He,y(o.title),1),l("div",Ne,[l("div",Xe,[E(t.$slots,"default",{},()=>[We]),l("div",qe,[l("button",{onClick:e[1]||(e[1]=(...a)=>n.onCloseClick&&n.onCloseClick(...a))},y(o.closeButtonText),1)])])])],4)])])}var oe=g(Ue,[["render",Ze]]);const Ee={name:"ZoomSlider",components:{Slider:G},emits:["update:zoom"],props:{zoom:{type:Number,default:1}},watch:{exp(t,e){this.$emit("update:zoom",2**t)},zoom(t,e){this.exp=Math.log2(t)}},methods:{sliderFormat(t){return Math.round(2**t*100)+"%"}},mounted(){},data(){return{exp:0}}},Ge={class:"zoom-slider"};function Ke(t,e,o,c,i,n){const a=p("Slider");return s(),r("div",Ge,[_(a,{modelValue:i.exp,"onUpdate:modelValue":e[0]||(e[0]=u=>i.exp=u),min:-4,max:4,width:100,step:-1,format:n.sliderFormat,tooltipPosition:"bottom",orientation:"horizontal"},null,8,["modelValue","format"])])}var Qe=g(Ee,[["render",Ke]]);const Je={name:"ImageViewport",components:{VueZoomer:K,ZoomSlider:Qe},emits:["update:zoom","update:translateX","update:translateY","load","resize"],props:{src:{type:String},height:{type:Number,default:500},zoom:{type:Number,default:1},scaleZoomRatio:{type:Number},translateX:{type:Number,default:1},translateY:{type:Number,default:1}},data(){return{ratio:1,ro:null}},watch:{height(t,e){var o;((o=this.$refs)==null?void 0:o.zoomer)&&(this.$refs.zoomer.onWindowResize(),this.$refs.zoomer.refreshContainerPos())},scaleZoomRatio(t){var e;((e=this.$refs)==null?void 0:e.zoomer)&&(this.$refs.zoomer.onWindowResize(),this.$refs.zoomer.refreshContainerPos()),this.$refs.zoomer.scale=this.zoom*this.scaleZoomRatio},zoom(t,e){this.isImageReady(),this.$refs.zoomer.scale=t*this.scaleZoomRatio},translateX(t,e){this.$refs.zoomer.translateX!=t&&(this.$refs.zoomer.translateX=t)},translateY(t,e){this.$refs.zoomer.translateY!=t&&(this.$refs.zoomer.translateY=t)}},methods:{getGoodContainerHeight(){var t,e,o;if((e=(t=this.$refs)==null?void 0:t.theimg)==null?void 0:e.naturalWidth){let c=this.$refs.theimg.naturalWidth/this.$refs.theimg.naturalHeight,n=((o=this.$refs.root)==null?void 0:o.offsetWidth)/c;return n>300&&(n=300),n}return 300},updateContainerHeight(){},isImageReady(){var t,e,o;return!(!((e=(t=this.$refs)==null?void 0:t.theimg)==null?void 0:e.naturalWidth)||!((o=this.$refs.root)==null?void 0:o.offsetWidth))},calcScaleZoomRatio(){var c,i;if(!this.isImageReady())return 1;let t=this.$refs.theimg.naturalWidth/((c=this.$refs.root)==null?void 0:c.offsetWidth),e=this.$refs.theimg.naturalHeight/((i=this.$refs.root)==null?void 0:i.offsetHeight),o=Math.max(t,e);return isNaN(o)?1:o},updateRatio(){},updateScale(){this.zoom&&(this.$refs.zoomer.scale=this.zoom*this.scaleZoomRatio)},zoomToFit(){},onImgLoad(){var t,e;((e=(t=this.$refs)==null?void 0:t.theimg)==null?void 0:e.naturalWidth)&&this.$emit("load")},onResize(){this.$emit("resize")},onDoubleTap(){console.log("double tab - zoom to 100%"),this.$emit("update:zoom",1),this.$emit("update:translateX",0),this.$emit("update:translateY",0)}},mounted(){window.ResizeObserver&&(this.ro=new ResizeObserver(this.onResize).observe(this.$refs.root)),this.$refs.zoomer.tapDetector.onDoubleTap(this.onDoubleTap),this.$watch("$refs.zoomer.scale",(t,e)=>{this.isImageReady(),this.$emit("update:zoom",t/this.scaleZoomRatio)}),this.$watch("$refs.zoomer.translateX",(t,e)=>{this.$emit("update:translateX",t)}),this.$watch("$refs.zoomer.translateY",(t,e)=>{this.$emit("update:translateY",t)})},beforeDestroy(){window.ResizeObserver&&this.ro.unobserve(this.$refs.zoomer)}},et={ref:"root",class:"image-viewport"},tt=["src"],ot={class:"zoom-info"};function it(t,e,o,c,i,n){const a=p("v-zoomer");return s(),r("div",et,[_(a,{ref:"zoomer",class:"zoomer",minScale:.1,maxScale:8,onResize:n.onResize,doubleClickToZoom:!1,style:B({height:o.height+"px"}),pivot:"cursor",limitTranslation:!1,lockPanOnNoScale:!1},{default:V(()=>[l("img",{ref:"theimg",src:o.src,onLoad:e[0]||(e[0]=(...u)=>n.onImgLoad&&n.onImgLoad(...u))},null,40,tt)]),_:1},8,["minScale","onResize","style"]),l("div",ot," zoom: "+y(Math.round(o.zoom*100))+"% ",1)],512)}var nt=g(Je,[["render",it]]);const st={name:"Variant",components:{ImageViewport:nt},emits:["select","update:zoom","update:translateX","update:translateY","load","resize"],props:{title:{type:String},info:{type:Object},url:{type:String,default:""},height:{type:Number},zoom:{type:Number},scaleZoomRatio:{type:Number},translateX:{type:Number},translateY:{type:Number},variantIndex:{type:Number}},computed:{imageUrl:function(){var t;return(t=this.info)==null?void 0:t.url},filesize:function(){var e;if(!((e=this.info)==null?void 0:e.size))return"";let t=this.info.size;return t<1024?t+" bytes":(t/=1024,t<1024?Math.round(t*10)/10+" kb":(t/=1024,Math.round(t*10)/10+" MB"))}},methods:{onVariantSelect(){this.$emit("select",this.variantIndex)},onLoad(){this.$emit("load")},zoomToFit(){this.$refs.theport.zoomToFit()}},mounted(){this.$watch("$refs.theport.zoom",(t,e)=>{this.$emit("update:zoom",t)}),this.$watch("$refs.theport.translateX",(t,e)=>{this.$emit("update:translateX",t)}),this.$watch("$refs.theport.translateY",(t,e)=>{this.$emit("update:translateY",t)})},data(){return{}}},at={class:"variant"},lt={class:"header"},rt={class:"title"},ct={class:"size"};function dt(t,e,o,c,i,n){const a=p("ImageViewport");return s(),r("div",at,[l("div",lt,[l("div",rt,y(o.title),1),l("div",ct,y(n.filesize),1)]),_(a,{ref:"theport",src:n.imageUrl,height:o.height,zoom:o.zoom,"onUpdate:zoom":e[0]||(e[0]=u=>o.zoom=u),scaleZoomRatio:o.scaleZoomRatio,translateX:o.translateX,"onUpdate:translateX":e[1]||(e[1]=u=>o.translateX=u),translateY:o.translateY,"onUpdate:translateY":e[2]||(e[2]=u=>o.translateY=u),onLoad:n.onLoad,onResize:e[3]||(e[3]=u=>this.$emit("resize"))},null,8,["src","height","zoom","scaleZoomRatio","translateX","translateY","onLoad"])])}var ie=g(st,[["render",dt],["__scopeId","data-v-0c38121e"]]);const ut={name:"Variants",components:{Variant:ie},emits:["update:zoom","update:translateX","update:translateY"],props:{file:{type:Object},viewport:{type:Object},height:{type:Number},zoom:{type:Number,default:1},translateX:{type:Number,default:0},translateY:{type:Number,default:0}},watch:{file(t,e){}},methods:{onZoomChange(t){this.$emit("update:zoom",t)},onTranslateXChange(t){this.$emit("update:translateX",t)},onTranslateYChange(t){this.$emit("update:translateY",t)},sliderFormat(t){return Math.round(t*100)+"%"},changeImage(){this.imageUrl=="http://localhost:3000/src/assets/dummy.jpg"?this.imageUrl="http://localhost:3000/src/assets/dummy2.jpg":this.imageUrl="http://localhost:3000/src/assets/dummy.jpg",this.selectedVariant=-1},onVariantSelect(t){this.selectedVariant=t}},mounted(){this.$watch("$refs.variants.zoom",(t,e)=>{})},data(){var t="http://localhost:3000/src/assets/200x100.jpg";return{imageUrl:"",selectedVariant:-1,variants:[{title:"Existing conversion",size:732,url:t},{title:"Lossy, q:20",size:35e5,url:t}]}}},ne=t=>(P("data-v-25a3327e"),t=t(),H(),t),ht={class:"variants-component"},mt=ne(()=>l("br",null,null,-1)),pt=ne(()=>l("br",null,null,-1)),ft={class:"variants"};function gt(t,e,o,c,i,n){const a=p("Variant");return s(),r("div",ht,[T(" File: "+y(o.file)+" ",1),l("button",{onClick:e[0]||(e[0]=u=>n.changeImage())},"Change image"),mt,pt,l("div",ft,[(s(!0),r(O,null,j(i.variants,(u,f)=>(s(),w(a,{title:u.title,info:u,variantIndex:f,class:L({selected:f==i.selectedVariant}),height:o.height,zoom:o.zoom,"onUpdate:zoom":[e[1]||(e[1]=h=>o.zoom=h),n.onZoomChange],translateX:o.translateX,"onUpdate:translateX":[e[2]||(e[2]=h=>o.translateX=h),n.onTranslateXChange],translateY:o.translateY,"onUpdate:translateY":[e[3]||(e[3]=h=>o.translateY=h),n.onTranslateYChange],onSelect:n.onVariantSelect},null,8,["title","info","variantIndex","class","height","zoom","translateX","translateY","onSelect","onUpdate:zoom","onUpdate:translateX","onUpdate:translateY"]))),256))])])}var vt=g(ut,[["render",gt],["__scopeId","data-v-25a3327e"]]);class A{static escape(e){return e.replace(/./gm,function(o){var c=/[0-9a-zA-Z\!\[\]\(\)\*\#]/;return c.test(o.charAt(0))?o.charAt(0):"&#"+o.charCodeAt(0)+";"})}static md2htmlOneLine(e){return e=A.escape(e),e=e.replace(/\[([^[]+)\]\(([^)]+)\)/gm,function(o,c,i){return'<a target="blank" href="'+i+'">'+c+"</a>"}),e=e.replace(/(\*\*[^\*]+\*\*)/gm,function(o){return"<b>"+o.substr(2,o.length-4)+"</b>"}),e=e.replace(/(\*[^\*]+\*)/gm,function(o){return"<i>"+o.substr(1,o.length-2)+"</i>"}),e.substr(0,1)=="#"&&(e.substr(0,2)=="# "&&(e="<h1>"+e.substr(2)+"</h1>"),e.substr(0,3)=="## "&&(e="<h2>"+e.substr(3)+"</h2>"),e.substr(0,4)=="### "&&(e="<h3>"+e.substr(4)+"</h3>"),e.substr(0,5)=="#### "&&(e="<h4>"+e.substr(5)+"</h4>")),e==""&&(e="<br>"),e}static md2html(e){for(var o=e.match(/[^\r\n]+/g),c=[],i=0;i<o.length;i++)c.push(A.md2htmlOneLine(o[i]));return c.join("<br>")}}const yt={name:"FileProperties",components:{Variant:ie,Variants:vt,Modal:oe},props:{file:{type:Object,default:{}}},computed:{originalMime:function(){var t;return((t=this.originalInfo)==null?void 0:t.mime)?this.originalInfo.mime:""},convertedMime:function(){var t;return((t=this.convertedInfo)==null?void 0:t.mime)?this.convertedInfo.mime:""}},watch:{file(t,e){t.isDir||this.changePath(t.path)}},methods:{onVariantSelect(t){this.selectedVariant=t},onOriginalLoad(){if(this.updateHeight(),this.$refs.original.$refs.theport.calcScaleZoomRatio()>1){let e=this.$refs.original.$refs.theport,o=e.$refs.theimg,c=e.$refs.root,i=o.naturalWidth,n=o.naturalHeight,a=c.offsetWidth,f=this.height/n,h=a/i;this.zoom=Math.min(f,h)}else this.zoom=1;this.translateX=0,this.translateY=0},onOriginalResize(){this.updateHeight()},onConvertClick(){let t=this;this.converting=!0,S.post("convert",{path:this.path},function(e){t.converting=!1,(e==null?void 0:e.success)==!1&&(t.errorMsg=e.data),e.converted&&(t.convertedInfo=e.converted),e.log&&(t.log=A.md2html(e.log))})},onDeleteConvertedClick(){let t=this;S.post("delete-converted",{path:this.path},function(e){(e==null?void 0:e.success)==!1?t.errorMsg=e.data:(t.log="",t.convertedInfo=null)})},updateHeight(){this.$refs.original&&(this.height=this.$refs.original.$refs.theport.getGoodContainerHeight(),this.scaleZoomRatio=this.$refs.original.$refs.theport.calcScaleZoomRatio())},reset(){this.originalInfo=null,this.convertedInfo=null},reload(){this.load()},changePath(t){this.reset(),this.path=t,this.loading=!0,this.errorMsg="",this.log="",this.load()},load(){let t=this;S.post("info",{path:this.path},function(e){(e==null?void 0:e.success)==!1&&(t.errorMsg=e.data),t.loading=!1,t.originalInfo=e.original,e.converted&&(t.convertedInfo=e.converted),e.log&&(t.log=A.md2html(e.log))})}},mounted(){this.file&&(this.path=this.file.path,this.load())},data(){return{zoom:1,scaleZoomRatio:1,translateX:0,translateY:0,height:100,loading:!1,errorMsg:"",originalInfo:null,convertedInfo:null,path:"",log:"",showingLogDialog:!1,converting:!1}}},R=t=>(P("data-v-7e2b3c58"),t=t(),H(),t),_t={class:"file-properties"},bt={class:"path"},wt=T(" Path: "),kt={class:"path"},xt={key:0,class:"error"},Vt={class:"variant-wrap"},Ct={class:"variant-footer"},zt={class:"variant-wrap"},St={key:0,class:"variant-footer"},Mt=R(()=>l("use",{"xlink:href":"#icon-trash"},null,-1)),It=[Mt],$t=["innerHTML"],Tt={key:0},Ot={key:1},Bt={key:0,class:"icon-converting",width:"15",height:"15"},Dt=R(()=>l("use",{"xlink:href":"#icon-loading"},null,-1)),Lt=[Dt],At=["disabled"],jt=R(()=>l("p",null," Above, you see the original image. If it has been converted, you also see the converted image (provided that your browser supports webp). ",-1)),Ft=R(()=>l("p",null," You can zoom in on the image, ie using scroll wheel. Both images will zoom, allowing you to compare the quality. Double-click the image to set zoom to 100%. You can also drag the image. ",-1));function Rt(t,e,o,c,i,n){const a=p("Variant"),u=p("Modal"),f=N("tooltip");return s(),r("div",_t,[l("div",bt,[wt,l("span",kt,y(o.file.path),1)]),i.errorMsg!=""?(s(),r("div",xt,[l("p",null,"Error: "+y(i.errorMsg),1)])):m("",!0),x(l("div",null,"Getting info...",512),[[I,i.loading]]),l("div",null,[l("div",Vt,[x(_(a,{ref:"original",title:"Original",info:i.originalInfo,height:i.height,zoom:i.zoom,"onUpdate:zoom":e[0]||(e[0]=h=>i.zoom=h),scaleZoomRatio:i.scaleZoomRatio,translateX:i.translateX,"onUpdate:translateX":e[1]||(e[1]=h=>i.translateX=h),translateY:i.translateY,"onUpdate:translateY":e[2]||(e[2]=h=>i.translateY=h),onLoad:n.onOriginalLoad,onResize:n.onOriginalResize},null,8,["info","height","zoom","scaleZoomRatio","translateX","translateY","onLoad","onResize"]),[[I,i.originalInfo]]),l("div",Ct,y(n.originalMime),1)]),l("div",zt,[x(_(a,{title:"Existing conversion",info:i.convertedInfo,height:i.height,zoom:i.zoom,"onUpdate:zoom":e[3]||(e[3]=h=>i.zoom=h),scaleZoomRatio:i.scaleZoomRatio,translateX:i.translateX,"onUpdate:translateX":e[4]||(e[4]=h=>i.translateX=h),translateY:i.translateY,"onUpdate:translateY":e[5]||(e[5]=h=>i.translateY=h)},null,8,["info","height","zoom","scaleZoomRatio","translateX","translateY"]),[[I,i.convertedInfo]]),i.convertedInfo?(s(),r("div",St,[T(y(n.convertedMime)+" ",1),x((s(),r("svg",{class:"icon-trash",onClick:e[6]||(e[6]=(...h)=>n.onDeleteConvertedClick&&n.onDeleteConvertedClick(...h))},It,512)),[[f,"Delete conversion"]])])):m("",!0)])]),x(_(u,{title:"Conversion log",closeButtonText:"Ok",width:"95vw",maxwidth:"1400px",height:"95vh",onClose:e[7]||(e[7]=h=>i.showingLogDialog=!1)},{default:V(()=>[l("div",{innerHTML:i.log},null,8,$t)]),_:1},512),[[I,i.showingLogDialog]]),l("div",null,[l("button",{onClick:e[8]||(e[8]=(...h)=>n.onConvertClick&&n.onConvertClick(...h))},[i.convertedInfo?(s(),r("span",Tt,"Reconvert")):m("",!0),i.convertedInfo?m("",!0):(s(),r("span",Ot,"Convert"))]),i.converting?(s(),r("svg",Bt,Lt)):m("",!0),i.log!=""?(s(),r("button",{key:1,onClick:e[9]||(e[9]=h=>i.showingLogDialog=!0),class:"log-button",disabled:i.converting},"View conversion log",8,At)):m("",!0)]),jt,Ft])}var Ut=g(yt,[["render",Rt],["__scopeId","data-v-7e2b3c58"]]);const Yt={name:"FolderProperties",components:{},props:{file:{type:Object,default:{}}},watch:{file(t,e){}}},Pt={class:"folder-properties"},Ht={class:"path"},Nt=T(" Path: "),Xt={class:"path"},Wt=l("p",null," You cannot do anything on folders yet. Browse to an image... ",-1);function qt(t,e,o,c,i,n){return s(),r("div",Pt,[l("div",Ht,[Nt,l("span",Xt,y(o.file.path),1)]),Wt])}var Zt=g(Yt,[["render",qt]]);const Et={name:"Group",components:{},props:{modelValue:{},ui:Object,schema:Object},emits:["update:modelValue"],methods:{onLocalChange(){this.$emit("update:modelValue",this.modelValue)}},mounted(){},data(){return{}}},Gt={class:"group"},Kt={key:0};function Qt(t,e,o,c,i,n){return s(),r("div",Gt,[o.ui.title?(s(),r("h3",Kt,y(o.ui?o.ui.title:""),1)):m("",!0),E(t.$slots,"default",{},void 0,!0)])}var Jt=g(Et,[["render",Qt],["__scopeId","data-v-6ea04f9d"]]);const eo={name:"Input",props:{modelValue:{},schema:Object},emits:["update:modelValue"],methods:{updateLocalModel(t){this.stringValue=t.toString()},onLocalChange(){var o;switch(((o=this==null?void 0:this.schema)==null?void 0:o.type)?this.schema.type[0]:"string"){case"integer":var e=parseInt(this.stringValue,10);this.$emit("update:modelValue",e);break;default:this.$emit("update:modelValue",this.stringValue);break}}},computed:{valueAsString:function(){return this.modelValue.toString()},dataType:function(){var t;if((t=this==null?void 0:this.schema)==null?void 0:t.type)switch(this.schema.type[0]){case"integer":return"int";default:return"string"}else return""}},mounted(){this.updateLocalModel(this.modelValue)},watch:{modelValue(t,e){this.updateLocalModel(t)},option(t,e){}},data(){return{stringValue:""}}};function to(t,e,o,c,i,n){return s(),r("div",{onInput:e[3]||(e[3]=a=>n.onLocalChange())},[n.dataType=="string"?x((s(),r("input",{key:0,"onUpdate:modelValue":e[0]||(e[0]=a=>i.stringValue=a)},null,512)),[[X,i.stringValue]]):m("",!0),n.dataType=="float"?x((s(),r("input",{key:1,type:"number","onUpdate:modelValue":e[1]||(e[1]=a=>i.stringValue=a)},null,512)),[[X,i.stringValue]]):m("",!0),n.dataType=="int"?x((s(),r("input",{key:2,type:"number","onUpdate:modelValue":e[2]||(e[2]=a=>i.stringValue=a),class:"small"},null,512)),[[X,i.stringValue]]):m("",!0)],32)}var oo=g(eo,[["render",to],["__scopeId","data-v-2bcaa592"]]);const io={name:"MultiSelect",components:{VueMultiselect:Q},props:{modelValue:{},schema:Object,ui:Object},emits:["update:modelValue"],computed:{options:function(){var e,o;var t=[];return((e=this==null?void 0:this.schema)==null?void 0:e.enum)&&(t=this.schema.enum),((o=this==null?void 0:this.ui)==null?void 0:o.options)&&(t=this.ui.options),t}},methods:{updateLocalModel(t){var e=t.toString().trim().split(",");e=e.filter(function(o){return o!=""}),this.valueAsArray=e},onLocalChange(){this.$emit("update:modelValue",this.valueAsArray.join(","))}},mounted(){this.updateLocalModel(this.modelValue)},watch:{modelValue(t,e){this.updateLocalModel(t)}},data(){return{valueAsArray:[]}}},no={key:0},so={key:0,class:"multiselect__single"},ao={key:1,class:"multiselect__single"},lo={key:2,class:"multiselect__single"};function ro(t,e,o,c,i,n){const a=p("VueMultiselect");return s(),w(a,{modelValue:i.valueAsArray,"onUpdate:modelValue":[e[0]||(e[0]=u=>i.valueAsArray=u),n.onLocalChange],options:n.options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!1,"preselect-first":!1,searchable:!1,allowEmpty:!0,placeholder:""},{selection:V(({values:u,search:f,isOpen:h})=>[h?m("",!0):(s(),r("span",no,[u.length>0&&u.length<n.options.length?(s(),r("span",so,y(u.join(", ")),1)):m("",!0),u.length==n.options.length?(s(),r("span",ao," all ")):m("",!0),u.length==0&&!h?(s(),r("span",lo," none ")):m("",!0)]))]),_:1},8,["modelValue","options","onUpdate:modelValue"])}var co=g(io,[["render",ro]]);const uo={name:"Select",components:{VueMultiselect:Q},props:{modelValue:{},ui:Object,schema:Object},emits:["update:modelValue"],methods:{updateLocalModel(t){},onLocalChange(){this.$emit("update:modelValue",this.modelValue)}},computed:{options:function(){var e,o;var t=[];return((e=this==null?void 0:this.schema)==null?void 0:e.enum)&&(t=this.schema.enum),((o=this==null?void 0:this.ui)==null?void 0:o.options)&&(t=this.ui.options),t}},mounted(){},watch:{modelValue(t,e){}},data(){return{}}};function ho(t,e,o,c,i,n){const a=p("VueMultiselect");return s(),w(a,{modelValue:o.modelValue,"onUpdate:modelValue":[e[0]||(e[0]=u=>o.modelValue=u),n.onLocalChange],options:n.options,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!1,"preselect-first":!1,searchable:!1,selectLabel:"",deselectLabel:"",allowEmpty:!1},null,8,["modelValue","options","onUpdate:modelValue"])}var mo=g(uo,[["render",ho]]);const po={name:"Slider",components:{VueSlider:G},props:{modelValue:{},ui:Object,schema:Object},emits:["update:modelValue"],methods:{onLocalChange(){this.$emit("update:modelValue",this.modelValue)}},mounted(){},data(){return{}}},fo={class:"slider"};function go(t,e,o,c,i,n){const a=p("VueSlider");return s(),r("div",fo,[_(a,{modelValue:o.modelValue,"onUpdate:modelValue":[e[0]||(e[0]=u=>o.modelValue=u),n.onLocalChange],min:o.schema.minimum,max:o.schema.maximum},null,8,["modelValue","onUpdate:modelValue","min","max"])])}var vo=g(po,[["render",go],["__scopeId","data-v-8f297ee6"]]);const yo={name:"Toggle",props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},reverse:{type:Boolean,default:!1},checkedText:{type:String,default:null},uncheckedText:{type:String,default:null},width:{type:[Number,String],default:75},height:{type:[Number,String],default:25},uncheckedBg:{type:String,default:"#939393"},uncheckedBgHover:{type:String,default:"#838383"},checkedBg:{type:String,default:"#0075ff"},checkedBgHover:{type:String,default:"#005cc8"},disabledBg:{type:String,default:"red"},dotColor:{type:String,default:"#fff"},fontSize:{type:[Number,String],default:"12"},checkedColor:{type:String,default:"#fff"},uncheckedColor:{type:String,default:"#fff"},fontWeight:{type:[Number,String],default:"normal"}},emits:["update:modelValue"],data(){return{checked:!0,hovering:!1}},methods:{toggle(){this.checked=!this.checked,this.$emit("update:modelValue",this.checked)}},mounted(){this.checked=this.modelValue},watch:{modelValue(t,e){this.checked=t}},computed:{bgStyle(){var t;return this.disabled?t=this.disabledBg:this.checked?t=this.hovering?this.checkedBgHover:this.checkedBg:t=this.hovering?this.uncheckedBgHover:this.uncheckedBg,{width:`${this.width}px`,height:`${this.height}px`,background:t}},dotStyle(){const t={background:this.dotColor,width:`${this.height-8}px`,height:`${this.height-8}px`,"min-width":`${this.height-8}px`,"min-height":`${this.height-8}px`,"margin-left":this.checked?`${this.width-(this.height-3)}px`:"5px"};return!this.checked&&this.reverse||this.checked&&!this.reverse?t.marginLeft=`${this.width-(this.height-3)}px`:(this.checked&&this.reverse||!this.checked&&!this.reverse)&&(t.marginLeft="5px"),t},textStyle(){const t={"font-weight":this.fontWeight,"font-size":`${this.fontSize}px`,color:this.checked&&!this.disabled?this.checkedColor:this.uncheckedColor,right:this.checked?`${this.height-3}px`:"auto",left:this.checked?"auto":`${this.height-3}px`};return!this.checked&&this.reverse?(t.right=`${this.height-3}px`,t.left="auto"):this.checked&&this.reverse&&(t.left=`${this.height-3}px`,t.right="auto"),t}}},_o=["aria-checked","aria-readonly"];function bo(t,e,o,c,i,n){return s(),r("span",{class:"vue-toggles",style:B(n.bgStyle),role:"switch",tabindex:"0","aria-checked":i.checked?"true":"false","aria-readonly":o.disabled?"true":"false",onClick:e[0]||(e[0]=a=>o.disabled?null:this.toggle()),onKeyup:[e[1]||(e[1]=J(ee(a=>o.disabled?null:this.toggle(),["prevent"]),["enter"])),e[2]||(e[2]=J(ee(a=>o.disabled?null:this.toggle(),["prevent"]),["space"]))],onMouseleave:e[3]||(e[3]=a=>i.hovering=!1),onMouseover:e[4]||(e[4]=a=>i.hovering=!0)},[l("span",{"aria-hidden":"true",style:B(n.dotStyle),class:"dot"},[x(l("span",{style:B(n.textStyle),class:"text"},y(o.checkedText),5),[[I,o.checkedText&&i.checked]]),x(l("span",{style:B(n.textStyle),class:"text"},y(o.uncheckedText),5),[[I,o.uncheckedText&&!i.checked]])],4)],44,_o)}var wo=g(yo,[["render",bo]]);const ko={name:"HelpIcon",props:{schema:Object,ui:Object},data(){return{btnDown:""}},methods:{}},xo={class:"help-icon"},Vo=l("svg",{class:"icon"},[l("use",{"xlink:href":"#icon-help"})],-1),Co={class:"menu-inner"},zo={key:0,class:"buttons"},So=["href","onMousedown"];function Mo(t,e,o,c,i,n){const a=p("VMenu");return s(),r("div",xo,[_(a,{delay:{show:100,hide:150}},{popper:V(()=>[l("div",Co,[l("p",null,y(o.schema.description),1),o.ui.links?(s(),r("div",zo,[(s(!0),r(O,null,j(o.ui.links,u=>(s(),r("a",{href:u[1],target:"_blank",class:L({"mouse-down":i.btnDown==u[0]}),onMousedown:f=>i.btnDown=u[0],onMouseup:e[0]||(e[0]=f=>i.btnDown=""),onMouseleave:e[1]||(e[1]=f=>i.btnDown="")},y(u[0]),43,So))),256))])):m("",!0)])]),default:V(()=>[Vo]),_:1})])}var Io=g(ko,[["render",Mo]]);const $o={name:"AutoComponent",components:{Group:Jt,Input:oo,MultiSelect:co,Select:mo,Slider:vo,Toggle:wo,HelpIcon:Io},props:{ui:Object,modelValue:{},schema:Object,advancedView:Boolean,expressionContext:String},emits:["componentDataChange"],watch:{modelValue(t,e){this.updateLocalModel(t)},ui(){this.updateLocalModel(this.modelValue)},schema(){},localModel(t){this.$emit("componentDataChange",{value:this.localModel,"data-property":this.ui["data-property"]})}},computed:{componentSchema(){return this.ui.hasOwnProperty("data-property")&&this.schema.hasOwnProperty("properties")&&this.schema.properties.hasOwnProperty(this.ui["data-property"])?this.schema.properties[this.ui["data-property"]]:null},enabled(){return(this==null?void 0:this.ui.advanced)&&!this.advancedView?!1:this.displayExpr?this.displayExpr.evaluate(this.expressionContext):!0}},data(){return{localModel:"",displayExpr:null,test:"hej"}},mounted(){this.updateLocalModel(this.modelValue),(this==null?void 0:this.ui.display)&&(this.displayExpr=new W(this.ui.display))},methods:{updateLocalModel(t){this.ui.hasOwnProperty("data-property")&&t.hasOwnProperty(this.ui["data-property"])&&(this.localModel=t[this.ui["data-property"]])},onComponentDataChange(t){this.$emit("componentDataChange",t)}}},To={key:0,class:"auto-component"},Oo={key:0},Bo={key:3};function Do(t,e,o,c,i,n){const a=p("HelpIcon"),u=p("Toggle"),f=p("Slider"),h=p("Select"),z=p("MultiSelect"),b=p("Input"),M=p("AutoComponent",!0),D=p("Group");return s(),w(se,{name:"fade"},{default:V(()=>{var $,v;return[n.enabled&&o.ui.component?(s(),r("div",To,[l("div",null,[o.ui.component!="group"?(s(),r("div",Oo,[l("label",null,y(($=n.componentSchema)==null?void 0:$.title),1),((v=n.componentSchema)==null?void 0:v.description)?(s(),w(a,{key:0,schema:n.componentSchema,ui:o.ui},null,8,["schema","ui"])):m("",!0)])):m("",!0),l("div",{class:L("component-"+o.ui.component)},[o.ui.component=="checkbox"?(s(),w(u,{key:0,modelValue:i.localModel,"onUpdate:modelValue":e[0]||(e[0]=d=>i.localModel=d),height:20,width:40},null,8,["modelValue"])):m("",!0),o.ui.component=="slider"?(s(),w(f,{key:1,modelValue:i.localModel,"onUpdate:modelValue":e[1]||(e[1]=d=>i.localModel=d),schema:n.componentSchema},null,8,["modelValue","schema"])):m("",!0),o.ui.component=="select"?(s(),w(h,{key:2,modelValue:i.localModel,"onUpdate:modelValue":e[2]||(e[2]=d=>i.localModel=d),schema:n.componentSchema,ui:o.ui},null,8,["modelValue","schema","ui"])):m("",!0),o.ui.component=="multi-select"?(s(),r("div",Bo,[_(z,{modelValue:i.localModel,"onUpdate:modelValue":e[3]||(e[3]=d=>i.localModel=d),schema:n.componentSchema,ui:o.ui},null,8,["modelValue","schema","ui"])])):m("",!0),o.ui.component=="input"?(s(),w(b,{key:4,modelValue:i.localModel,"onUpdate:modelValue":e[4]||(e[4]=d=>i.localModel=d),schema:n.componentSchema},null,8,["modelValue","schema"])):m("",!0),o.ui.component=="group"?(s(),w(D,{key:5,modelValue:i.localModel,"onUpdate:modelValue":e[5]||(e[5]=d=>i.localModel=d),schema:n.componentSchema,ui:o.ui},{default:V(()=>[(s(!0),r(O,null,j(o.ui["sub-components"],d=>(s(),w(M,{ui:d,schema:o.schema,modelValue:o.modelValue,advancedView:o.advancedView,expressionContext:o.expressionContext,onComponentDataChange:n.onComponentDataChange},null,8,["ui","schema","modelValue","advancedView","expressionContext","onComponentDataChange"]))),256))]),_:1},8,["modelValue","schema","ui"])):m("",!0)],2)])])):m("",!0)]}),_:1})}var Lo=g($o,[["render",Do],["__scopeId","data-v-1891f338"]]);const Ao={name:"AutoUI",components:{AutoComponent:Lo},props:{schema:Object,ui:Object,modelValue:{},expressionContext:String,advancedView:{type:Boolean,default:!1},showAdvancedButton:{type:Boolean,default:!0}},computed:{},data(){return{}},mounted(){},methods:{onComponentDataChange(t){this.modelValue[t["data-property"]]=t.value}}},jo={class:"autoui"},Fo={key:0,class:"view-select"},Ro=["textContent"];function Uo(t,e,o,c,i,n){const a=p("AutoComponent"),u=N("tooltip");return s(),r("div",jo,[o.showAdvancedButton?(s(),r("div",Fo,[x(l("button",{textContent:y(o.advancedView?"Hide advanced options":"Show advanced options"),onClick:e[0]||(e[0]=f=>o.advancedView=!o.advancedView)},null,8,Ro),[[u,"Swich between advanced view (all available options) and simple view (most used options)"]])])):m("",!0),_(a,{ui:o.ui,schema:o.schema,modelValue:o.modelValue,advancedView:o.advancedView,expressionContext:o.expressionContext,onComponentDataChange:n.onComponentDataChange},null,8,["ui","schema","modelValue","advancedView","expressionContext","onComponentDataChange"])])}var Yo=g(Ao,[["render",Uo],["__scopeId","data-v-30912c7e"]]);const Po={name:"ConvertOptions2",components:{AutoUI:Yo},computed:{},data(){return{ui:{},schema:{},general:{ui:{},data:{quality:40,"alpha-quality":65,"auto-limit":!0,"command-line-options":"","skip-these-precompiled-binaries":""}},png:{ui:{},data:{}},advancedView:!1}},mounted(){var t=this;S.post("conversion-settings",{folder:""},function(e){let o=[],c=[],i={},n={},a={overrides:["encoding","quality","alpha-quality","near-lossless"]},u=[],f=e.options.general,h=e.options.unique,z=f.map(v=>v);for(const v in h)for(let d=0;d<h[v].length;d++){let k=h[v][d];k.id=v+"-"+k.id,z.push(k)}for(var b=0;b<z.length;b++)u.push(z[b].id);let M={};for(var b=0;b<z.length;b++){let d=z[b];d.schema&&(i[d.id]=d.schema,e.defaults[d.id]?n[d.id]=e.defaults[d.id]:d.schema.default!=null&&(n[d.id]=d.schema.default,a[d.id]=d.schema.default)),d.unsupportedBy&&(M[d.id]=d.unsupportedBy)}for(const[v,d]of Object.entries(n.png))a[v]=d;for(var b=0;b<f.length;b++){let d=f[b];if(d.ui){let k=d.ui;k["data-property"]=d.id,k.display?k.display='supported("'+d.id+'") && ('+k.display+")":k.display='supported("'+d.id+'")',o.push(k);let C=Object.assign({},d.ui);C["data-property"]=d.id,C.display?C.display='overriding("'+d.id+'") && ('+C.display+")":C.display='overriding("'+d.id+'")',c.push(C)}}for(const v in h){let d={component:"group",title:v+" options","sub-components":[],display:"(option.converter == '"+v+"') || (option.converter == 'stack')"},k=!1;for(let C=0;C<h[v].length;C++){let U=h[v][C];if(U.ui){let Y=U.ui;Y["data-property"]=U.id,Y.advanced||(k=!0),d["sub-components"].push(Y)}}d.advanced=!k,d["sub-components"].length>0&&o.push(d)}t.general={ui:{component:"group",title:"General","sub-components":o},data:n},t.png={ui:{component:"group",title:"PNG overrides","sub-components":c},data:a},t.schema={title:"Options",type:["object"],properties:i};let D={option:t.general.data,imageType:"any",supported:function(v){if(!t.general.data.converter)return!0;let d=t.general.data.converter;return d=="stack"||!M||!M[v]?!0:!M[v].includes(d)}},$={option:t.png.data,imageType:"png",overriding:function(v){return t.png.data.overrides.indexOf(v)>-1},supported:function(v){return!0}};W.setGlobalContext(D,"general"),W.setGlobalContext($,"png")}),S.post("get-tree",{folder:""},function(e){t.item=e})},watch:{},methods:{}},Ho={class:"convert-options"},No=["textContent"];function Xo(t,e,o,c,i,n){const a=p("AutoUI"),u=N("tooltip");return s(),r("div",Ho,[x(l("button",{textContent:y(i.advancedView?"Hide advanced options":"Show advanced options"),onClick:e[0]||(e[0]=f=>i.advancedView=!i.advancedView)},null,8,No),[[u,"Swich between advanced view (all available options) and simple view (most used options)"]]),_(a,{ui:i.general.ui,schema:i.schema,modelValue:i.general.data,expressionContext:"general",advancedView:i.advancedView,showAdvancedButton:!1},null,8,["ui","schema","modelValue","advancedView"]),x(_(a,{ui:i.png.ui,schema:i.schema,modelValue:i.png.data,expressionContext:"png",advancedView:i.advancedView,showAdvancedButton:!1},null,8,["ui","schema","modelValue","advancedView"]),[[I,i.advancedView]])])}var Wo=g(Po,[["render",Xo]]);const qo={name:"Welcome"},Zo={class:"welcome"},Eo=Z('<div class="headline"><div>Welcome to</div><h3>WebP Convert file manager</h3></div><p> To open a folder, click the &quot;+&quot; sign next to the folder name or double click the folder name </p><p><h4>Whats new?</h4><ul><li>You can now convert files and view conversion log</li></ul></p><p><h4>Whats planned ahead?</h4> I have plenty of ideas, but no planned priority. Ideas: <ul><li>Trigger bulk conversion on folders / mark for background conversion</li><li>Stats on folders</li><li>Display more info on images (dimensions and such)</li><li>Adjust conversion settings</li><li>Interface to allow adjusting quality on a conversion quickly and compare directly</li><li>Compare converters side-by-side (visual quality, result size, conversion time)</li></ul> To support development, you can <a href="https://ko-fi.com/rosell" target="_blank">buy me a cup of coffee</a></p>',4),Go=[Eo];function Ko(t,e,o,c,i,n){return s(),r("div",Zo,Go)}var Qo=g(qo,[["render",Ko]]);const Jo={name:"WCFM",components:{SVGs:pe,ConvertOptions2:Wo,FileProperties:Ut,FolderProperties:Zt,Modal:oe,Files:Re,Splitpanes:te.exports.Splitpanes,Pane:te.exports.Pane,Welcome:Qo},methods:{onConvertClick(t){var c,i;let e=(i=(c=this.$refs.convertOptions)==null?void 0:c.general)==null?void 0:i.data,o={path:t,convertOptions:e};console.log(o),S.post("convert",o,function(n){console.log("convert response:",n)})},onConvertCloseClick(){console.log("CLRCL"),this.showConvertOptions=!1},onFileSelect(t,e){this.file={path:t,isDir:e}},displayInfo(t){var e=this;S.post("info",{path:t},function(o){e.selectedInfo=o})}},mounted(){var t=this;S.post("get-folder",{path:""},function(e){t.item=e.children[0]})},data(){return{file:null,selectedItem:null,item:null,treeStatusText:"loading file tree...",selectedInfo:{},showConvertOptions:!1}},provide(){return{wcfm:this}}},ei={class:"wcfm",style:{overflow:"hidden"}},ti={class:"pane-content"},oi={key:0,class:"pane-content"};function ii(t,e,o,c,i,n){const a=p("SVGs"),u=p("Files"),f=p("pane"),h=p("FileProperties"),z=p("FolderProperties"),b=p("Welcome"),M=p("splitpanes"),D=p("ConvertOptions2"),$=p("Modal");return s(),r("div",ei,[_(a),_(M,{class:"default-theme",style:{position:"absolute",top:"0",left:"0"}},{default:V(()=>[_(f,{size:"30"},{default:V(()=>[l("div",ti,[l("div",null,[_(u,{item:i.item,statusText:i.treeStatusText,onSelect:n.onFileSelect},null,8,["item","statusText","onSelect"])])])]),_:1}),_(f,{size:"70",style:{"overflow-y":"auto"}},{default:V(()=>[i.file?(s(),r("div",oi,[i.file.isDir?m("",!0):(s(),w(h,{key:0,file:i.file},null,8,["file"])),i.file.isDir?(s(),w(z,{key:1,file:i.file},null,8,["file"])):m("",!0)])):m("",!0),i.file?m("",!0):(s(),w(b,{key:1}))]),_:1})]),_:1}),l("button",{class:"convertOptionsButton",onClick:e[0]||(e[0]=v=>i.showConvertOptions=!0)},"Conversion options"),x(_($,{title:"Conversion options",closeButtonText:"Ok",width:"600px",height:"95%",maxheight:"650px",alignment:"right",onClose:n.onConvertCloseClick},{default:V(()=>[_(D,{ref:"convertOptions"},null,512)]),_:1},8,["onClose"]),[[I,i.showConvertOptions]])])}var ni=g(Jo,[["render",ii]]);var si={general:[{id:"converter",schema:{title:"Converter",description:"Cwebp and vips are best. the *magick are nearly as good, but only recent versions supports near-lossless. gd is poor, as it does not support any webp options. For full discussion, check the guide",enum:["cwebp","vips","imagick","gmagick","imagemagick","graphicsmagick","wpc","ffmpeg","ewww","gd","stack"],type:["string"],default:"stack"},ui:{component:"select",links:[["Guide","https://github.com/rosell-dk/webp-convert/blob/master/docs/v1.3/converting/converters.md"]]},sensitive:!1,options:["cwebp","vips","imagick","gmagick","imagemagick","graphicsmagick","wpc","ffmpeg","ewww","gd","stack"]},{id:"encoding",schema:{title:"Encoding",description:'Set encoding for the webp. If you choose "auto", webp-convert will convert to both lossy and lossless and pick the smallest result',enum:["auto","lossy","lossless"],type:["string"],default:"auto"},ui:{component:"select",links:[["Guide","https://github.com/rosell-dk/webp-convert/blob/master/docs/v2.0/converting/introduction-for-converting.md#auto-selecting-between-losslesslossy-encoding"]]},sensitive:!1,options:["auto","lossy","lossless"],unsupportedBy:["ffmpeg","ewww","gd","stack"]},{id:"quality",schema:{title:"Quality (Lossy)",description:"Quality for lossy encoding. ","default-png":85,"default-jpeg":75,oneOf:[{type:"number",minimum:0,maximum:100},{type:"string",enum:["auto"]}],type:["integer","string"],default:85},ui:{component:"slider",display:"option.encoding != 'lossless'"},unsupportedBy:["stack"]},{id:"auto-limit",schema:{title:"Auto-limit",description:"Enable this option to prevent an unnecessarily high quality setting for low quality jpegs. You really should enable this.",type:["boolean"],default:!0},ui:{component:"checkbox",advanced:!0,links:[["Guide","https://github.com/rosell-dk/webp-convert/blob/master/docs/v2.0/converting/introduction-for-converting.md#preventing-unnecessarily-high-quality-setting-for-low-quality-jpegs"]],display:"option.encoding != 'lossless'"},unsupportedBy:[]},{id:"alpha-quality",schema:{title:"Alpha quality",description:"Quality of alpha channel. Often, there is no need for high quality transparency layer and in some cases you can tweak this all the way down to 10 and save a lot in file size. The option only has effect with lossy encoding, and of course only on images with transparency.",type:["integer"],default:85,minimum:0,maximum:100},ui:{component:"slider",links:[["Guide","https://github.com/rosell-dk/webp-convert/blob/master/docs/v2.0/converting/introduction-for-converting.md#alpha-quality"]],display:"(option.encoding != 'lossless') && (imageType!='jpeg')"},unsupportedBy:["ffmpeg","ewww","gd","stack"]},{id:"near-lossless",schema:{title:'"Near lossless" quality',description:"This option allows you to get impressively better compression for lossless encoding, with minimal impact on visual quality. The range is 0 (maximum preprocessing) to 100 (no preprocessing). Read the guide for more info.",type:["integer"],default:60,minimum:0,maximum:100},ui:{component:"slider",links:[["Guide","https://github.com/rosell-dk/webp-convert/blob/master/docs/v2.0/converting/introduction-for-converting.md#near-lossless"]],display:"option.encoding != 'lossy'"},unsupportedBy:["gmagick","graphicsmagick","ffmpeg","ewww","gd","stack"]},{id:"metadata",schema:{title:"Metadata",description:'Determines which metadata that should be copied over to the webp. Setting it to "all" preserves all metadata, setting it to "none" strips all metadata. *cwebp* can take a comma-separated list of which kinds of metadata that should be copied (ie "exif,icc"). *gd* will always remove all metadata and *ffmpeg* will always keep all metadata. The rest can either strip all or keep all (they will keep all, unless the option is set to *none*)',type:["string"],default:"none"},ui:{component:"multi-select",options:["all","none","exif","icc","xmp"]},sensitive:!1,unsupportedBy:["ffmpeg","gd","stack"]},{id:"method",schema:{title:"Reduction effort (0-6)",description:'Controls the trade off between encoding speed and the compressed file size and quality. Possible values range from 0 to 6. 0 is fastest. 6 results in best quality and compression. PS: The option corresponds to the "method" option in libwebp',type:["integer"],default:6,minimum:0,maximum:6},ui:{component:"slider",advanced:!0},unsupportedBy:["ewww","gd","stack"]},{id:"sharp-yuv",schema:{title:"Sharp YUV",description:"Better RGB->YUV color conversion (sharper and more accurate) at the expense of a little extra conversion time.",type:["boolean"],default:!0},ui:{component:"checkbox",advanced:!0,links:[["Ctrl.blog","https://www.ctrl.blog/entry/webp-sharp-yuv.html"]]},unsupportedBy:["ffmpeg","ewww","gd","stack"]},{id:"auto-filter",schema:{title:"Auto-filter",description:"Turns auto-filter on. This algorithm will spend additional time optimizing the filtering strength to reach a well-balanced quality. Unfortunately, it is extremely expensive in terms of computation. It takes about 5-10 times longer to do a conversion. A 1MB picture which perhaps typically takes about 2 seconds to convert, will takes about 15 seconds to convert with auto-filter. ",type:["boolean"],default:!1},ui:{component:"checkbox",advanced:!0},unsupportedBy:["vips","ffmpeg","ewww","gd","stack"]},{id:"low-memory",schema:{title:"Low memory",description:"Reduce memory usage of lossy encoding at the cost of ~30% longer encoding time and marginally larger output size. Only effective when the *method* option is 3 or more. Read more in [the docs](https://developers.google.com/speed/webp/docs/cwebp)",type:["boolean"],default:!1},ui:{component:"checkbox",advanced:!0,display:"(option.encoding != 'lossless') && (option.method>2)"},unsupportedBy:["ffmpeg","ewww","gd","stack"]},{id:"preset",schema:{title:"Preset",description:'Using a preset will set many of the other options to suit a particular type of source material. It even overrides them. It does however not override the quality option. "none" means that no preset will be set',enum:["none","default","photo","picture","drawing","icon","text"],type:["string"],default:"none"},ui:null,sensitive:!1,options:["none","default","photo","picture","drawing","icon","text"],unsupportedBy:["ffmpeg","ewww","gd","stack"]},{id:"size-in-percentage",schema:{"allow-null":!0,type:["integer","null"],default:null,minimum:0,maximum:100},ui:null,unsupportedBy:["vips","imagick","gmagick","imagemagick","graphicsmagick","ffmpeg","ewww","gd","stack"]},{id:"skip",schema:{type:["boolean"],default:!1},ui:null,unsupportedBy:["stack"]},{id:"log-call-arguments",schema:{type:["boolean"],default:!1},ui:null,unsupportedBy:[]},{id:"use-nice",schema:{type:["boolean"],default:!1},ui:null,unsupportedBy:["vips","imagick","gmagick","ffmpeg","ewww","gd","stack"]},{id:"jpeg",schema:{type:["array"],default:[]},ui:null,sensitive:!1,unsupportedBy:[]},{id:"png",schema:{type:["array"],default:[]},ui:null,sensitive:!1,unsupportedBy:[]}],unique:{cwebp:[{id:"try-cwebp",schema:{title:"Try plain cwebp command",description:'If set, the converter will try executing "cwebp -version". In case it succeeds, and the version is higher than those working cwebps found using other methods, the conversion will be done by executing this cwebp.',type:["boolean"],default:!0},ui:{component:"checkbox",advanced:!0}},{id:"try-discovering-cwebp",schema:{title:"Try discovering cwebp binary",description:'If set, the converter will try to discover installed cwebp binaries using a "which -a cwebp" command, or in case that fails, a "whereis -b cwebp" command. These commands will find cwebp binaries residing in PATH',type:["boolean"],default:!0},ui:{component:"checkbox",advanced:!0}},{id:"try-common-system-paths",schema:{title:"Try locating cwebp in common system paths",description:'If set, the converter will look for a cwebp binaries residing in common system locations such as "/usr/bin/cwebp". If such exist, it is assumed that they are valid cwebp binaries. A version check will be run on the binaries found (they are executed with the "-version" flag. The cwebp with the highest version found using this method and the other enabled methods will be used for the actual conversion.Note: All methods for discovering cwebp binaries are per default enabled. You can save a few microseconds by disabling some, but it is probably not worth it, as your setup will then become less resilient to system changes.',type:["boolean"],default:!0},ui:{component:"checkbox",advanced:!0}},{id:"try-supplied-binary-for-os",schema:{title:"Try precompiled cwebp binaries",description:'If set, the converter will try use a precompiled cwebp binary that comes with webp-convert. But only if it has a higher version that those found by other methods. As the library knows the versions of its bundled binaries, no additional time is spent executing them with the "-version" parameter. The binaries are hash-checked before executed. The library btw. comes with several versions of precompiled cwebps because they have different dependencies - some works on some systems and others on others.',type:["boolean"],default:!0},ui:{component:"checkbox",advanced:!0}},{id:"skip-these-precompiled-binaries",schema:{title:"Skip these precompiled binaries",description:"",type:["string"],default:""},ui:{component:"multi-select",advanced:!0,options:["cwebp-120-linux-x86-64","cwebp-110-linux-x86-64","cwebp-103-linux-x86-64-static","cwebp-061-linux-x86-64"],display:"option['try-supplied-binary-for-os'] == true"},sensitive:!1},{id:"rel-path-to-precompiled-binaries",schema:{title:"Rel path to precompiled binaries",description:"",type:["string"],default:"./Binaries"},ui:{component:"",advanced:!0,display:"option['try-supplied-binary-for-os'] == true"},sensitive:!0},{id:"command-line-options",schema:{title:"Command line options",description:"",type:["string"],default:""},ui:{component:"input",advanced:!0},sensitive:!1}],vips:[],imagick:[],gmagick:[],imagemagick:[{id:"try-common-system-paths",schema:{title:"Try locating ImageMagick in common system paths",description:'If set, the converter will look for a ImageMagick binaries residing in common system locations such as "/usr/bin/convert". If such exist, it is assumed that they are valid ImageMagick binaries. ',type:["boolean"],default:!0},ui:{component:"checkbox",advanced:!0}}],graphicsmagick:[],wpc:[{id:"api-key",schema:{type:["string"],default:""},ui:null,sensitive:!0},{id:"secret",schema:{type:["string"],default:""},ui:null,sensitive:!0},{id:"api-url",schema:{type:["string"],default:""},ui:null,sensitive:!0},{id:"url",schema:{type:["string"],default:""},ui:null,sensitive:!0},{id:"api-version",schema:{type:["integer"],default:2,minimum:0,maximum:2},ui:null},{id:"crypt-api-key-in-transfer",schema:{type:["boolean"],default:!1},ui:null}],ffmpeg:[],ewww:[{id:"api-key",schema:{title:"Ewww API key",description:'ewww API key. If you choose "auto", webp-convert will convert to both lossy and lossless and pick the smallest result',type:["string"],default:""},ui:{component:"input"},sensitive:!0},{id:"check-key-status-before-converting",schema:{title:"Check key status before converting",description:"If enabled, the api key will be validated (relative inexpensive) before trying to convert. For automatic conversions, you should enable it. Otherwise you run the risk that the same files will be uploaded to ewww cloud service over and over again, in case the key has expired. For manually triggered conversions, you can safely disable the option.",type:["boolean"],default:!0},ui:{component:"checkbox"}}],gd:[],stack:[{id:"converters",schema:{title:"Converters",description:"Converters to try, ordered by priority.",type:["array"],enum:["cwebp","vips","imagick","gmagick","imagemagick","graphicsmagick","wpc","ffmpeg","ewww","gd","stack"],default:["cwebp","vips","imagick","gmagick","imagemagick","graphicsmagick","wpc","ffmpeg","ewww","gd"]},ui:{component:"multi-select",advanced:!0},sensitive:!1},{id:"converter-options",schema:{title:"Converter options",description:"Extra options for specific converters.",sensitive:!0,ui:null,type:["array"],default:[]},ui:null,sensitive:!1},{id:"preferred-converters",schema:{title:"Preferred converters",description:"With this option you can move specified converters to the top of the stack. The converters are specified by id.",ui:null,type:["array"],default:[]},ui:null,sensitive:!1},{id:"extra-converters",schema:{title:"Extra converters",description:"Add extra converters to the bottom of the stack",sensitive:!0,ui:null,type:["array"],default:[]},ui:null,sensitive:!1},{id:"shuffle",schema:{title:"Shuffle",description:"Shuffles the converter order on each conversion. Can for example be used to spread out requests on multiple cloud converters",type:["boolean"],default:!1},ui:{component:"checkbox",advanced:!0}}]}};const q=ae(ni);q.use(K);q.use(le,{defaultHtml:!1});window.wcfmoptions||(window.wcfmoptions={},window.wcfmoptions.poster=function(t,e,o,c){switch(t){case"get-folder":switch(e.path){case"":var i={children:[{name:"/",isDir:!0,nickname:"root"}]};break;case"/":var i={children:[{name:"empty-folder",isDir:!0,isEmpty:!0},{name:"file",isDir:!1,isConverted:!0},{name:"aaa",isDir:!1,isConverted:!0},{name:"test-folder",isDir:!0},{name:"file2",isDir:!1,isConverted:!1}]};break;case"/empty-folder":var i={children:[]};break;case"/test-folder":var i={children:[{name:"banana",isDir:!1},{name:"subfolder",isDir:!0},{name:"apple",isDir:!1}]};break;case"/test-folder/subfolder":var i={children:[{name:"file2",isDir:!1},{name:"file1",isDir:!1}]};break;default:c();return}break;case"conversion-settings":var i={options:si,defaults:{quality:17},systemStatus:{converterRequirements:{gd:{extensionLoaded:!1,compiledWithWebP:!0}}}};break;case"info":if(e.path=="/file2")var i={original:{size:100,url:"http://localhost:3000/src/assets/200x100.jpg",mime2:"image/jpeg"},converted:{size:70,url:"http://localhost:3000/src/assets/200x100.jpg",mime:"image/webp"},log:`blah blah blah
\rand *more* blah`};else if(e.path=="/file")var i={original:{size:100,url:"http://localhost:3000/src/assets/dummy2.jpg",mime:"image/jpeg"},log:"blah blah *blah*"};else var i={original:{size:100,url:"http://localhost:3000/src/assets/dummy.jpg",mime:"image/jpeg"},converted:{size:70,url:"http://localhost:3000/src/assets/dummy.jpg",mime:"image/webp"},log:"blah blah *blah*"};break;case"convert":if(e.path=="/file2")var i={success:!1,data:"We pretend file2 errors converting...",log:"Oh no!"};else var i={success:!0,converted:{size:26050,url:"http://we0/wordpress/wp-content/uploads/2021/10/Screenshot_2021-10-04_13-43-11.png.webp",mime:"image/webp"},log:`All is *groovy*
next line`};break;case"delete-converted":if(e.path=="/file2")var i={success:!1,data:"We pretend file2 errors deleting..."};else var i={success:!0};break;default:var i="ok";break}o(i)});q.mount("#webpconvert-filemanager");
